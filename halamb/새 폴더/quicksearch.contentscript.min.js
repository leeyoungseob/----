/**
 * Copyright 2016 NAVER Corp. All Rights reserved.
 * All rights, including but not limited to, copyrights,
 * and intellectual property rights of this source code are owned by NAVER Corp.
 *
 * You may not use, reproduce, modify, or distribute this source code
 * without prior written permission from NAVER Corp.
 */"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Util=function(){function a(a,b,c,d,e){return new Promise(function(f,g){var h=new XMLHttpRequest;if(h.open(a,c),"object"===("undefined"==typeof d?"undefined":_typeof(d)))for(var i in d)d.hasOwnProperty(i)&&h.setRequestHeader(i,d[i]);h.onreadystatechange=function(){var a=void 0;if(4===h.readyState){if("json"===b)try{a=JSON.parse(h.responseText||"{}")}catch(b){a={}}else a=h.responseText;f(a)}},h.onerror=function(){g()},h.send(e)})}function b(b,c){return a("get","json",b,c)}function c(b,c,d){var e="object"===("undefined"==typeof d?"undefined":_typeof(d))?i(d):d;return a("post","json",b,c,e)}function d(b,c){return a("get","text",b,c)}function e(a,b,c){var d=document.createElement("form");d.setAttribute("method","post"),d.setAttribute("target",b),d.setAttribute("action",a),d.setAttribute("accept-charset","utf8"),"object"===("undefined"==typeof c?"undefined":_typeof(c))&&Object.keys(c).forEach(function(a){var b=document.createElement("input");b.setAttribute("name",a),b.setAttribute("value",c[a]),d.appendChild(b)}),d.submit()}function f(a,b){var c,d,e,f,g,h;return a=a.replace(k,"").replace(/\s/g,""),c=a.charCodeAt(0),d=c>12543&&c<12592,e=c>=65&&c<=90||c>=97&&c<=122,f=c>19967&&c<40912||c>13311&&c<13568||c>131071&&c<131328,g=c>4351&&c<4608||c>12591&&c<12688||c>44031&&c<55216||c>65439&&c<65501,h=c>12351&&c<12448||c>12447&&c<12544||c>12785&&c<12800||c>65380&&c<65438||c>=65296&&c<=65305,f&&b&&(b=b.toUpperCase(),["CP1386","CP936"].includes(b)||b.startsWith("GB")||b.startsWith("BIG5")||b.startsWith("HKSCS"))?"zh":e?"en":h||f?"ja":d?"zh":g?"ko":void 0}function g(a,b){for(var c=b.parentNode;null!=c;){if(c==a)return!0;c=c.parentNode}return!1}function h(a,b,c,d){var e=a.split("."),f=e.shift(),g=document.createElement(f);return e.length>0&&(g.className=e.join(" ")),"object"===("undefined"==typeof b?"undefined":_typeof(b))&&Object.keys(b).forEach(function(a){g.style[a]=b[a]}),"object"===("undefined"==typeof c?"undefined":_typeof(c))&&Object.keys(c).forEach(function(a){g.setAttribute(a,c[a])}),"undefined"!=typeof d&&(g.innerHTML=d),g}function i(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")}function j(a,b){var c=Object.assign({type:a},b);return new Promise(function(a,b){wl.RuntimeMessage.send("quicksearch",c).then(function(c){c&&c!==!1?a(c):b()})})}var k=/。，；〈〉｛｝《》『』「」（）【】　/g;return{request:j,postJSON:c,getJSON:b,getText:d,submit:e,checkLanguage:f,isDescendant:g,createElement:h,obj2URI:i}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Selection=function(){function a(){window.addEventListener("contextmenu",c,!0),window.addEventListener("mouseup",e,!0),window.addEventListener("mousedown",d,!0),window.addEventListener("selectstart",function(){G.isSelectStarted=!0},!0)}function b(){return window.getSelection().rangeCount||G.rangeCount}function c(a){a instanceof MouseEvent!=!1&&2===a.button&&v()}function d(a){a instanceof MouseEvent!=!1&&(a.which>1||f(a.target)||(v(),G.mouseEvt=a))}function e(a){if(a instanceof MouseEvent!=!1)return a.which>1||b()<=0?void v():void(f(a.target)||(G.isSelectStarted?(G.isSelectStarted=!1,G.__markTimer=setTimeout(function(){g(a),G.mouseEvt=void 0},0)):(clearTimeout(G.__markTimer),G.__markTimer=void 0)))}function f(a){for(var b=G.exceptionalElements,c=0,d=b.length;c<d;c++)if(a===b[c]||$quickSearch.Util.isDescendant(a,b[c]))return!0;return!1}function g(a){var b,c,d,e,f=window.getSelection(),g=i(a,f);f.rangeCount<1||(c=f.getRangeAt(0).cloneRange(),d=j(c,f),e=k(f),d&&(b=l(c,g),b&&s(d,{context:e,position:b,direction:g,originalEvent:a})))}function h(a){return Array.from(a.parentNode.childNodes)}function i(a,b){if(b.anchorNode===b.focusNode)return b.anchorOffset<b.focusOffset;if(b.anchorNode.parentNode===b.focusNode.parentNode){var c=h(b.anchorNode);return c.indexOf(b.anchorNode)<c.indexOf(b.focusNode)}if(G.mouseEvt){var d=G.mouseEvt.screenX-a.screenX,e=G.mouseEvt.screenY-a.screenY;if(0===d&&0===e)return!0;if(d>=0&&e>=0)return!1}return!0}function j(a,b){var c,d,e=a.cloneContents(),f="script,style,img,figure,picture,video,audio,embed,object,button,input";if(e.querySelectorAll(f).forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),e.querySelectorAll("*").forEach(function(a){"none"===(a.style.display||"").toLowerCase()&&a.parentNode&&a.parentNode.removeChild(a)}),d=e.textContent.trim(),0!==d.length&&(G.rxNumericChars.test(d)&&b.anchorNode===b.extentNode&&b.anchorNode.nodeType===Node.TEXT_NODE&&(c=k(b),Math.abs(c.length-d.length)<3&&(d=(c||"").trim())),0!==d.replace(G.rxSpecialChars,"").length))return d}function k(a){return a.anchorNode.parentElement?a.anchorNode.parentElement.textContent:a.anchorNode.nodeValue}function l(a,b){var c=m(a,b),d=a.getBoundingClientRect();return 0!==d.width&&0!==d.height&&(!!c&&{rect:d,top:document.body.scrollTop+c.top,left:document.body.scrollLeft+c.left+(b?c.width:-10),height:c.height})}function m(a,b){var c,d=n(a);return 0!==d.length&&(c=b?p(a,d):q(a,d),d[c])}function n(a){var b=Array.from(a.getClientRects());return b.filter(function(a){return!b.find(function(b){return a!==b&&o(b.top,a.top,a.top+a.height)&&o(b.left,a.left,a.left+a.width)})})}function o(a,b,c){var d=Math.min(b,c),e=Math.max(b,c);return a>d&&a<e}function p(a,b){var c,d=b.length-1,e=a.endContainer.nodeType===Node.TEXT_NODE,f=a.endContainer.contains(a.startContainer);for(e||f||(d=Math.max(0,d-1)),c=d;c>=0;c--)if(r(b[c]))return c;return-1}function q(a,b){var c,d=0,e=b.length-1,f=a.startContainer.nodeType===Node.TEXT_NODE,g=a.startContainer.contains(a.endContainer);for(f||g||(d=Math.min(1,e)),c=d;c<=e;c++)if(r(b[c]))return c;return-1}function r(a){return a.height>1&&a.width>0}function s(a,b){G.isSelectStarted=!1,G.selectedText=a,G.selectedRect=b.position.rect,B("selected",{text:a,context:b.context,position:b.position,direction:b.direction,originalEvent:b.originalEvent}),u(),G.watchTimer=setInterval(t,G.watchInterval)}function t(){var a,b;if(G.selectedText){if(a=window.getSelection(),0===a.rangeCount)return void v();b=a.getRangeAt(0).getBoundingClientRect(),0!==b.width&&0!==b.height||v()}}function u(){G.watchTimer&&clearInterval(G.watchTimer),G.watchTimer=void 0}function v(){G.selectedText&&(G.isSelectStarted=!1,G.selectedText=void 0,G.selectedRect=void 0),B("unselected"),u()}function w(){return G.selectedText}function x(){return G.selectedRect}function y(a){G.exceptionalElements.indexOf(a)>-1||G.exceptionalElements.push(a)}function z(a,b){if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var c in a)F[c]=F[c]||[],F[c].push(a[c]);else F[a]=F[a]||[],F[a].push(b)}function A(a,b){if(!b)return void(F[a]=[]);var c=F[a],d=c?c.indexOf(b):-1;d>-1&&F[a].splice(d,1)}function B(a,b){var c,d=F[a];if(d instanceof Array!=!1)return d.forEach(function(a){c=c||a(b)}),c}function C(){return b()>0}function D(a){var b,c=G.element;G.element&&(b=c.value,c.value=b.substring(0,c.selectionStart)+a+b.substring(c.selectionEnd),v())}var E=["[ -/]","[[-`]","[{-]","[─-╿]","[▀-▟]","[■-◿]","[☀-⛿]","[✀-➿]","[⟰-⟿]","[⤀-⥿]","[⬀-⯿]","[　-〿]","[㌀-㏿]"],F={},G={selectedText:"",exceptionalElements:[],isSelectStarted:!1,watchTimer:void 0,watchInterval:50,rxNumericChars:/^[0-9\.,]+$/,rxSpecialChars:new RegExp(E.join("|"),"g")};return a(),{on:z,off:A,replace:D,getText:w,getRect:x,setException:y,isRangeExists:C}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Button=function(){function a(a){n=a,m=$quickSearch.Util.createElement("button.button",0,{type:"button"},'<span class="icon"></span>'),m.addEventListener("mouseover",b),m.addEventListener("mouseout",c),m.addEventListener("mousedown",d)}function b(a){i("mouseover",a)}function c(a){i("mouseout",a)}function d(a){return i("click",a),a.preventDefault(),a.stopPropagation(),!1}function e(a){n.style.top=a.top+"px",n.style.left=a.left+"px",n.firstElementChild?n.insertBefore(m,n.firstElementChild):n.appendChild(m)}function f(){m.parentNode&&m.parentNode.removeChild(m),l()}function g(a,b){if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var c in a)o[c]=o[c]||[],o[c].push(a[c]);else o[a]=o[a]||[],o[a].push(b)}function h(a,b){if(!b)return void(o[a]=[]);var c=o[a],d=c?c.indexOf(b):-1;d>-1&&o[a].splice(d,1)}function i(a,b){var c,d=o[a];if(d instanceof Array!=!1)return d.forEach(function(a){c=c||a(b)}),c}function j(){return m}function k(){m.classList.add("on")}function l(){m.classList.remove("on")}var m,n,o={};return{init:a,on:g,off:h,show:e,hide:f,active:k,inactive:l,getElement:j}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Menu=function(){function a(a){r=a,q=b(),q.addEventListener("selectstart",function(a){return a.stopPropagation(),a.preventDefault(),!1},!1),q.addEventListener("mousedown",d),q.addEventListener("mouseover",function(){n("mouseover")}),q.addEventListener("mouseout",function(){n("mouseout")})}function b(){var a=$quickSearch.Util.createElement("div.menu"),b=$quickSearch.Util.createElement("ul.menulist"),c=[],d={search:"EXTENSION_QUICKSEARCH_MENU_SEARCH",translate:"EXTENSION_QUICKSEARCH_MENU_TRANSL"};for(var e in d)c.push('\n        <li class="menuitem menu-'+e+'" data-menu="'+e+'">\n          <i class="ico"></i>\n          <span class="text">'+whale.i18n.getMessage(d[e])+"</span>\n        </li>");return b.innerHTML=c.join(""),a.appendChild($quickSearch.Util.createElement("div.spacer")),a.appendChild(b),c=null,t.listElement=b,a}function c(){return t.listElement}function d(a){var b=a.target.getAttribute("data-menu"),c=a.target.closest(".litmus-result");return b?(n("click",{item:b,element:a.target}),a.preventDefault(),a.stopPropagation(),!1):void(c||f())}function e(){if(!t.isVisible){t.isVisible=!0;var a=r.getBoundingClientRect(),b=a.left+t.maxWidth>=window.innerWidth&&a.left-t.maxWidth>0?"r":"l",c=a.top+t.maxHeight>=window.innerHeight||t.direction===!1?"b":"t";"b"===c&&a.top<t.maxHeight+20&&(c="t"),"l"===b&&a.left+100>=window.innerWidth&&(b="r"),q.classList.remove("pop-tr","pop-tl","pop-br","pop-bl"),q.classList.add("pop-"+c+b),a.left+t.maxWidth>=window.innerWidth&&a.left-t.maxWidth<0?q.classList.add("mini"):q.classList.remove("mini"),r.appendChild(q),n("show",{position:""+c+b})}}function f(){t.isVisible&&(t.isVisible=!1,q.parentNode&&(q.parentNode.removeChild(q),n("hide")))}function g(){return t.isVisible?f():e()}function h(a){t.direction=a}function i(a){var b=k(a);b&&(b.classList.remove("disabled"),$quickSearch.Util.request("updateContextMenu",{target:[a],props:{enabled:!0}}))}function j(a){var b=k(a);b&&(b.classList.add("disabled"),$quickSearch.Util.request("updateContextMenu",{target:[a],props:{enabled:!1}}))}function k(a){return q.querySelector('[data-menu="'+a+'"]')}function l(a,b){if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var c in a)s[c]=s[c]||[],s[c].push(a[c]);else s[a]=s[a]||[],s[a].push(b)}function m(a,b){if(!b)return void(s[a]=[]);var c=s[a],d=c?c.indexOf(b):-1;d>-1&&s[a].splice(d,1)}function n(a,b){var c=void 0,d=s[a];if(d instanceof Array!=!1)return d.forEach(function(a){c=c||a(b)}),c}function o(){return q}function p(){return t.isVisible}var q,r,s={},t={isVisible:!1,maxWidth:350,maxHeight:210};return{init:a,on:l,off:m,direction:h,show:e,hide:f,showItem:i,hideItem:j,toggle:g,isVisible:p,getListElement:c,getElement:o}}(),window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Request=function(){function a(a,c){return new Promise(function(c,e){var f=d(a);$quickSearch.Util.request("litmus",{keyword:a}).then(function(a){c(a)},function(){b(f,a,c,e)})})}function b(a,b,d,e){return b.length>h?c(a,b,d,e):void $quickSearch.Util.request("quicksearch",{query:a}).then(function(a){d(a)},function(){c(a,b,d,e)})}function c(a,b,c,d){return b.length>i?void d():void $quickSearch.Translate.exec(b).then(function(b){a===b?d():c(b)},function(){d()})}function d(a){a=decodeURIComponent(a),a=a.trim();for(var b in g)g.hasOwnProperty(b)&&(a=a.replace(g[b],b));return a=a.replace(f,""),a=a.replace(e,""),a=a.trim(),a=encodeURIComponent(a)}var e=/['"“”‘’,]/g,f=/。，；〈〉｛｝《》『』「」（）【】　/g,g={$1GBP:/^£(.[0-9.,]+)$/,$1CNY:/^¥(.[0-9.,]+)$/,CNY:/^¥$/},h=100,i=200;return{send:a}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Result=function(){function a(a){k=a,l.wrapper=$quickSearch.Util.createElement("div.result"),l.litmus=$quickSearch.Util.createElement("div.litmus-result",0,{hidden:"hidden"}),l.frame=$quickSearch.Util.createElement("iframe.k-result",0,{scrolling:"no",hidden:"hidden",frameborder:"0"}),l.wrapper.appendChild(l.litmus),l.wrapper.appendChild(l.frame),k.appendChild(l.wrapper)}function b(){l.litmus.innerHTML="",l.wrapper.classList.remove("loaded"),k.classList.remove("has-result"),n.currentURL=o,n.currentData=null,n.currentURL&&n.currentURL.startsWith("blob:")&&setTimeout(function(){URL.revokeObjectURL(n.currentURL)},0)}function c(){if(n.currentData&&n.currentData.html){if(n.isVisible)return;n.currentData.isLitmus?l.litmus.removeAttribute("hidden"):j(function(){return l.frame.contentDocument}).then(function(){l.frame.removeAttribute("hidden"),l.frame.classList.add("loading"),l.frame.contentDocument.documentElement.innerHTML=n.currentHTML,setTimeout(function(){l.frame.classList.remove("loading"),n.isVisible=!0},120)})}else d()}function d(){l.frame.setAttribute("hidden","hidden"),l.litmus.setAttribute("hidden","hidden"),n.isVisible=!1}function e(a){return new Promise(function(b){n.currentURL=o,n.currentData=a,a.html&&(a.isLitmus?l.litmus.innerHTML=a.html:n.currentHTML=a.html),l.wrapper.classList.add("loaded"),k.classList.add("has-result"),b(l)})}function f(a){return n[a]}function g(){return l.wrapper}function h(a,b){if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var c in a)m[c]=m[c]||[],m[c].push(a[c]);else m[a]=m[a]||[],m[a].push(b)}function i(a,b){if(!b)return void(m[a]=[]);var c=m[a],d=c?c.indexOf(b):-1;d>-1&&m[a].splice(d,1)}function j(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.timeout||1e4,d=b.interval||20,e=Date.now();return new Promise(function(b,f){var g=setInterval(function(){var d=a();d&&(clearInterval(g),b(d)),Date.now()-e>c&&(clearInterval(g),f())},d)})}var k=void 0,l={},m={},n={currentData:{},maxWidth:350,isVisible:!1},o="about:blank";return{init:a,on:h,off:i,show:c,hide:d,empty:b,set:e,getElement:g,getCached:f}}(),window.$quickSearch="undefined"==typeof window.$quickSearch?{}:window.$quickSearch,$quickSearch.Translate=function(){function a(a){b(),c(),r.container=a}function b(){var a=void 0,b=void 0,c=void 0,d=u("div.translation-textarea",0,0,t("EXTENSION_QUICKSEARCH_TRANS_PROGRESS"));a=u("div.translation-control"),b=a.appendChild(u("div.translation-select-wrap")),c=a.appendChild(u("div.translation-select-wrap")),r.srcLangEl=b.appendChild(u("select.translation-select")),r.tarLangEl=c.appendChild(u("select.translation-select")),w.sources.forEach(function(a){var b="EXTENSION_QUICKSEARCH_LANG_"+a.toUpperCase().replace("-",""),c=t("EXTENSION_QUICKSEARCH_TRANS_SRCLANG",[t(b)]),d=t("EXTENSION_QUICKSEARCH_TRANS_TARLANG",[t(b)]);r.srcLangEl.appendChild(u("option",0,{value:a},c)),r.tarLangEl.appendChild(u("option",0,{value:a},d))}),r.moreLinkEl=u("div.translation-more",0,0,'<button type="button" class="link-more">'+t("EXTENSION_QUICKSEARCH_TRANS_MORE")+'<i class="ico-more"></i></button>'),r.moreLinkEl.setAttribute("hidden","hidden"),r.wrapper=u("div.translation-wrapper",0,{translate:"no"}),r.wrapper.appendChild(a),r.result=r.wrapper.appendChild(d),r.wrapper.appendChild(r.moreLinkEl)}function c(){r.wrapper.addEventListener("selectstart",function(a){return a.preventDefault(),a.stopPropagation(),!1}),r.srcLangEl.addEventListener("change",d),r.tarLangEl.addEventListener("change",e),r.moreLinkEl.addEventListener("click",f)}function d(){n(t("EXTENSION_QUICKSEARCH_TRANS_PROGRESS")),k(),l(s).then(function(a){n(a)},function(){n(t("EXTENSION_QUICKSEARCH_TRANS_ERROR"))})}function e(){n(t("EXTENSION_QUICKSEARCH_TRANS_PROGRESS")),l(s).then(function(a){n(a)},function(){n(t("EXTENSION_QUICKSEARCH_TRANS_ERROR"))})}function f(){var a=s.split("\n").filter(function(a){return a.trim().length}).join("\n");whale.sidebars.open({id:"sidebar_papago"},function(){setTimeout(function(){wl.RuntimeMessage.send("papago.translate",{srcLang:r.srcLangEl.value,tarLang:r.tarLangEl.value,text:a})},100)})}function g(a){return!!a&&(s=a,n(t("EXTENSION_QUICKSEARCH_TRANS_PROGRESS")),r.container.appendChild(r.wrapper),void whale.i18n.detectLanguage(a,function(b){var c=i(a,b);if(!w.sources.includes(c.source)){var d=c.source.toUpperCase().replace("-",""),e=t("EXTENSION_QUICKSEARCH_LANG_"+d);return n(e?t("EXTENSION_QUICKSEARCH_TRANS_IS_NOT_SUPPORTED_LANGUAGE",[e]):t("EXTENSION_QUICKSEARCH_TRANS_NOT_SUPPORTED_LANGUAGE")),r.tmpSrcLangOptionEl=u("option",0,{value:d,disabled:"disabled",supported:"false"},e),r.srcLangEl.insertBefore(r.tmpSrcLangOptionEl,r.srcLangEl.firstElementChild),r.srcLangEl.value=d,!1}r.tmpSrcLangOptionEl&&r.tmpSrcLangOptionEl.parentNode&&(r.tmpSrcLangOptionEl.parentNode.removeChild(r.tmpSrcLangOptionEl),r.tmpSrcLangOptionEl=void 0),r.srcLangEl.querySelectorAll('option[supported="false"]').forEach(function(a){a&&a.parentNode&&a.parentNode.removeChild(a)}),j(c),k(),l(a).then(function(a){n(a),setTimeout(m,0)},function(){n(t("EXTENSION_QUICKSEARCH_TRANS_ERROR"))})}))}function h(){r.wrapper.parentNode&&(r.wrapper.className="translation-wrapper",r.wrapper.parentNode.removeChild(r.wrapper))}function i(a,b){var c=void 0,d=void 0;return b&&b.isReliable&&b.languages&&b.languages[0]&&(c=b.languages[0].language),c=c||$quickSearch.Util.checkLanguage(a,document.characterSet)||document.documentElement.lang||"en",d="ko"===c?"en":"ko",c.startsWith("zh")&&(c="zh-CN"),{source:c,target:d}}function j(a){r.srcLangEl.value=a.source,r.tarLangEl.value=a.target}function k(){var a=void 0,b=r.srcLangEl.value,c=r.tarLangEl.value,d=w.targets[b];Array.from(r.tarLangEl.querySelectorAll("option")).forEach(function(b){var c=!d.includes(b.value);b.disabled=c,b.style.display=c?"none":"",a||c||(a=b)}),d.includes(c)||(r.tarLangEl.value=a.value)}function l(a,b,c){return new Promise(function(d,e){var f={srcLang:b||r.srcLangEl.value,tarLang:c||r.tarLangEl.value,text:a};w.nmt_sources.includes(f.srcLang)&&w.nmt_targets[f.srcLang].includes(f.tarLang)&&(f.machine="n2mt"),$quickSearch.Util.request("translate",f).then(function(a){a?d(a):e()},function(){e()})})}function m(a){var b=r.wrapper.getBoundingClientRect(),c=b.left+b.width>=window.innerWidth?"r":"l",d=b.top+b.height>=window.innerHeight?"b":"t";r.wrapper.className="translation-wrapper pop-"+d+c}function n(a){var b=o(a);b.length>v?(b=b.substr(0,v)+"&hellip;",r.moreLinkEl.removeAttribute("hidden")):r.moreLinkEl.setAttribute("hidden","hidden"),r.result.innerHTML=b}function o(a){return(a||"").replace(/<(?:.|\n)*?>/gm,"")}function p(a){return new Promise(function(b){whale.i18n.detectLanguage(a,function(c){var d=void 0;c&&c.isReliable&&c.languages&&c.languages[0]&&(d=c.languages[0].language),d=d||$quickSearch.Util.checkLanguage(a,document.characterSet)||document.documentElement.lang||"en","zh"===d&&(d="zh-CN"),b(d)})})}function q(a){return new Promise(function(b,c){var d=o(a).trim();return 0===d.length?void c():void p(d).then(function(a){var e=whale.i18n.getUILanguage()||"ko";return w.sources.includes(a)&&w.sources.includes(e)?void(a!==e?l(d,a,e).then(function(a){a===!1?c():b({isLitmus:!0,html:'<div class="translated">'+a+"</div>"})},function(){c()}):c()):void c()})})}var r={},s="",t=whale.i18n.getMessage,u=$quickSearch.Util.createElement,v=150,w={sources:["ko","en","ja","zh-CN"],targets:{ko:["en","ja","zh-CN"],en:["ko"],ja:["ko"],"zh-CN":["ko"]},nmt_sources:["ko","en","zh-CN"],nmt_targets:{ko:["en","zh-CN"],en:["ko"],"zh-CN":["ko"]}};return{init:a,exec:q,show:g,hide:h}}(),function(){function a(){return!!document.contentType.startsWith("text/")&&(!(navigator.userAgent.includes("Mobile")||navigator.userAgent.includes("sidebar")||navigator.userAgent.includes("inline_login"))&&(!(window.innerWidth<100&&window.innerHeight<100&&window!==window.top)&&(wl.Preferences.get([w,x]).then(function(a){a[w]&&b().then(function(){a[x]&&"hover"===a[x]&&e()})}),void wl.Preferences.onChanged.addListener(function(a){"undefined"!=typeof a[w]&&(a[w]?b():c()),"undefined"!=typeof a[x]&&("hover"===a[x]?e():f())},v))))}function b(){if(!A)return A=!0,y&&!y.parentNode?new Promise(function(a){wl.ShadowRoot.appendChild(y),window.addEventListener("resize",j),a()}):d().then(i)}function c(){A&&(A=!1,y&&y.parentNode&&(y.parentNode.removeChild(y),window.removeEventListener("resize",j)))}function d(){return new Promise(function(a){y=wl.ShadowRoot.appendChild(document.createElement("quicksearch")),a()})}function e(){A&&(B||(B=!0,$quickSearch.Button.on("mouseover",g),$quickSearch.Button.on("mouseout",h),$quickSearch.Menu.on("mouseover",g),$quickSearch.Menu.on("mouseout",h)))}function f(){A&&B&&(B=!1,$quickSearch.Button.off("mouseover",g),$quickSearch.Button.off("mouseout",h),$quickSearch.Menu.off("mouseover",g),$quickSearch.Menu.off("mouseout",h))}function g(){clearTimeout(z.timer),$quickSearch.Menu.show(),$quickSearch.Result.show(),$quickSearch.Translate.hide(),z.isOnRequest&&setTimeout(g,100)}function h(){clearTimeout(z.timer),z.timer=setTimeout(function(){$quickSearch.Menu.hide(),$quickSearch.Result.hide(),$quickSearch.Translate.hide()},100)}function i(){$quickSearch.Button.init(y),$quickSearch.Button.on("click",m),$quickSearch.Menu.init(y),$quickSearch.Menu.on("click",p),$quickSearch.Menu.on("show",n),$quickSearch.Menu.on("hide",o),$quickSearch.Result.init($quickSearch.Menu.getElement()),$quickSearch.Result.on("click",s),$quickSearch.Selection.setException(y),$quickSearch.Selection.setException(wl.ShadowRoot.host),$quickSearch.Selection.on("selected",k),$quickSearch.Selection.on("unselected",l),$quickSearch.Translate.init(y),window.addEventListener("resize",j),wl.RuntimeMessage.listen("quicksearch.contextmenu",function(a){return!(!$quickSearch.Selection.isRangeExists()||!A)&&void("SEARCH"===a.action?q(a.query):"TRANSLATE"===a.action&&(wl.ShadowRoot.appendChild(y),r(a.query)))})}function j(){$quickSearch.Button.hide(),$quickSearch.Menu.hide(),$quickSearch.Translate.hide(),$quickSearch.Result.hide()}function k(a){return!!A&&($quickSearch.Menu.direction(a.direction),$quickSearch.Button.show({top:Math.max(0,a.position.top+(a.direction?10:-20)),left:Math.max(0,Math.round(a.position.left-(a.direction,5)))}),a.text.length>u?$quickSearch.Menu.hideItem("search"):$quickSearch.Menu.showItem("search"),t(a.text,a.context),void wl.ShadowRoot.appendChild(y))}function l(){$quickSearch.Button.hide(),$quickSearch.Menu.hide(),$quickSearch.Translate.hide(),$quickSearch.Result.hide(),y.parentNode&&y.parentNode.removeChild(y)}function m(){$quickSearch.Result.show(),$quickSearch.Menu.toggle(),$quickSearch.Translate.hide()}function n(a){var b=$quickSearch.Result.getElement();if(b.parentElement)if(a.position.startsWith("b")){var c=$quickSearch.Menu.getListElement();b.parentElement.insertBefore(b,c)}else b.parentElement.appendChild(b);$quickSearch.Button.active()}function o(){$quickSearch.Button.inactive()}function p(a){var b=$quickSearch.Selection.getText();"search"===a.item?q(b):"translate"===a.item&&r(b),$quickSearch.Menu.hide(),$quickSearch.Button.hide()}function q(a){a&&$quickSearch.Util.request("nxnet",{query:a}).then(function(a){whale.sidebars.open({id:"sidebar_quicksearch",url:a},function(){})})}function r(a){var b=a||$quickSearch.Selection.getText();$quickSearch.Button.hide(),$quickSearch.Menu.hide(),$quickSearch.Translate.show(b)}function s(a){"site"===a.type&&window.open(a.data.link,"_blank").focus()}function t(a,b){z.isOnRequest=!0,$quickSearch.Result.empty(),$quickSearch.Result.hide(),$quickSearch.Request.send(a,b).then(function(a){$quickSearch.Result.set(a),z.isOnRequest=!1}).catch(function(){$quickSearch.Result.empty(),$quickSearch.Result.hide(),z.isOnRequest=!1})}var u=50,v="quicksearch",w=v+".enabled",x=v+".trigger",y=void 0,z={},A=!1,B=!1;a()}();